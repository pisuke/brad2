#summary brad2 module layout

== Design Goal ==

The Python modules used in brad2 should be created as components
that are reusable by other scripts and applications as well. We
don't want to write the same Radiance scene parser again and again.
To allow the 'import' of individual modules dependencies on brad2
and Blender have to be minimised. The separation in front-end, logic
and auxiliary code should be considered in the design phase of the
individual modules. 


http://pages.google.com/-/static_files/brad2_modules.png

http://pages.google.com/-/static_files/brad2_modules.png/brad2_modules-full.jpg

The proposed file structure is designed with these requirements in
mind. It will provide separate directories for the brad2 core modules,
GUI modules, independent scripts and Radiance related modules and
functions.


== File System and Module Layout ==

=== brad2 - the exporter core modules ===

{{{
brad2 : the main code base for the exporter
  |     [ this needs to be in the Blender Python search path ]
  |
  +== base : framework classes not dependent on Blender modules (was 'borg')
  |          [session management, i18n, config, logging]
  |
  +== gui - interface code (formerly bliff)
  |     |
  |     +-- base : frame superclasses and basic functional classes
  |     |          [BaseFrame, TextFrame, ImageFrame]
  |     | 
  |     +-- interface : controls events, user interaction and menus
  |     |               [Interface, Menu, settings, config, about, splash]
  |     |
  |     +-- layout : specialised frames for layout control
  |     |            [Layout, ColumnLayout, RowLayout]
  |     |
  |     +-- listframe : listbox related classes
  |     |
  |     +-- export_frames: render options and export summary
  |     +-- luminaire_frames : Radiance luminaire data
  |     +-- material_frames : Radiance material data
  |     +-- sky_frames: set sky options (gensky, gendaylit, HDR, weatherdata)
  |   [ +-- plot_frames: visualise numeric data (was rtrace) ]
  |   [ +-- monitor_frames: display of render progress       ]
  |   [ +-- report_frames: create and preview PDF reports    ]
  | 
  +== radiance : create and interface to Radiance files
  |     |
  |     +-- export : create Radiance project files
  |     +-- luminaire : make luminaire data available in Blender
  |     +-- material : assign or create materials
  |     +-- scene : combine all settings for Radiance export
  |     +-- sky : basic sky class (better in raylib?)
  |     
  +== scene : wraps the Blender scene objects
  |           [scene, mesh, lamp, camera, material, empty]
  |
  +== aux : non essential modules
        |
        +-- VTK
        +-- OpenDX
        +-- database code
}}}


=== raylib - Python API for Radiance

This library contains classes to interface to Radiance binaries
and Radiance scene files. These classes are useful for all scripts
that deal with Radiance related files. Ideally it would be a C-extension
based on the Radiance C-source code to avoid recoding of the existing
C functions. That might take a while, though.

The location of this directory should be in PYTHONPATH to allow
any script use of these classes and functions.


{{{    
raylib : Python library related to Radiance apps and files
  |      [ this should be included in PYTHONPATH by the user        ]
  |      [ best way for this would be a Python C extension based on ]
  |      [ the Radiance sources - but that might take a while       ]
  |
  +-- replacement for 'rad' in Python
  +-- parser for *.rif
  +-- parser for *.rad and *.mat
  +-- ies2rad in Python
  +-- ldt2rad
  +-- *.pic reading, pvalue/pfilt/pcond etc. in Python
  +-- unified command line handling ('getopt' is too limited)
}}}

=== scripts - stand alone scripts and tools ===

This directory will contain utilities to simplify complex processes
for the end user. This directory should be included in the user's PATH. 
Some of these scripts might even get a GUI front end in brad2 or provide
command line versions of GUI modules that can be used without Blender
running.

{{{
scripts
  |
  +-- brtrace : distribute numeric rendering to multiple processes
  +-- pdfplot : create PDF plots from numeric results
  +-- weatherdatapdf : create PDF plots from weather data files
}}}
  


